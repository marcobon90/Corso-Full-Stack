<template id="pulsante-template">
    <link rel="stylesheet" href="pulsante.css">
    <div>
        <span>Clicca qui</span>
    </div>
</template>
<mio-pulsante>

</mio-pulsante>

<span>Span fuori dallo shadow DOM</span>
<script>
    function AttaccaShadow(elemento, aperto = false) {
        if (!aperto) {
            return elemento.attachShadow({mode:'closed'})
        } else {
            return elemento.attachShadow({mode:'open'})
        }
    }

    function OttieniTemplate(id) {
        return document.getElementById(id)
    }

    class Pulsante extends HTMLElement {
        constructor() {
            super()

            const shadow = AttaccaShadow(this)
            const template = OttieniTemplate('pulsante-template').content

            shadow.appendChild(template)

            shadow.addEventListener('click',() => shadow.querySelector('div').classList.add('giallo'))
        }

        
    }

    customElements.define('mio-pulsante', Pulsante)
</script>